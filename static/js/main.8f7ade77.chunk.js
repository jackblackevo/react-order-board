(this["webpackJsonpreact-order-board"]=this["webpackJsonpreact-order-board"]||[]).push([[0],{75:function(e,n,t){e.exports=t(92)},92:function(e,n,t){"use strict";t.r(n);var r=t(4),a=t(0),o=t.n(a),i=t(30),c=t(22),u=t(27),d=t(3),l=t(60),f=t.n(l),s=t(9),b=t(19),p=t(96),m=t(16),v=t(29),O=t(56),g=t(67),x=t(94),j=t(65),h=t(66),E=t(95),y=Object(b.b)("orders/addOrder"),k=Object(b.b)("orders/deleteOrder"),w=Object(b.b)("orders/updateOrder"),C=Object(b.b)("orders/apiError"),S=Object(b.c)({name:"orders",initialState:{list:[]},reducers:{addOrderFulfilled:function(e,n){var t=n.payload,r=e.list;return Object(v.a)({},e,{list:[].concat(Object(s.a)(r),[t])})},deleteOrderFulfilled:function(e,n){var t=n.payload,r=e.list;return Object(v.a)({},e,{list:r.filter((function(e){return e.id!==t}))})},updateOrderFulfilled:function(e,n){var t=n.payload,r=e.list,a=r.findIndex((function(e){var n=e.id;return t.id===n}));return Object(v.a)({},e,{list:[].concat(Object(s.a)(r.slice(0,a)),[t],Object(s.a)(r.slice(a+1)))})}}}),D=S.reducer,I=S.actions,z=I.addOrderFulfilled,A=I.deleteOrderFulfilled,U=I.updateOrderFulfilled,R=Object(m.combineReducers)({orders:D}),F=t(97),L=t(72),P=t(2),T=t.n(P),V=t(68),G=new Map,N=function(e){var n,t;return T.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=Object(V.v4)(),t=Object(v.a)({},e,{id:n,creationDate:(new Date).getTime(),modificationDate:(new Date).getTime()}),G.set(n,t),r.abrupt("return",t);case 4:case"end":return r.stop()}}))},B=function(e){var n,t,r;return T.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.id,t=G.get(n),r=Object(v.a)({},t,{},e,{modificationDate:(new Date).getTime()}),G.set(n,r),a.abrupt("return",r);case 5:case"end":return a.stop()}}))},J=function(e){return T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:G.delete(e);case 1:case"end":return n.stop()}}))},M={postOrderAPI:function(){return Object(L.a)(N.apply(void 0,arguments))},deleteOrderAPI:function(){return Object(L.a)(J.apply(void 0,arguments))},patchOrderAPI:function(){return Object(L.a)(B.apply(void 0,arguments))}},Y=Object(F.a)((function(e,n,t){var r=t.postOrderAPI;return e.pipe(Object(x.a)(y.match),Object(j.a)((function(e){return r(e.payload).pipe(Object(h.a)(z),Object(E.a)((function(e){return Object(g.a)(C(e))})))})))}),(function(e,n,t){var r=t.deleteOrderAPI;return e.pipe(Object(x.a)(k.match),Object(j.a)((function(e){return r(e.payload).pipe(Object(h.a)((function(){return A(e.payload)})),Object(E.a)((function(e){return Object(g.a)(C(e))})))})))}),(function(e,n,t){var r=t.patchOrderAPI;return e.pipe(Object(x.a)(w.match),Object(j.a)((function(e){return r(e.payload).pipe(Object(h.a)(U),Object(E.a)((function(e){return Object(g.a)(C(e))})))})))})),q=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,t=0;return function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];clearTimeout(t),t=setTimeout((function(){return e.apply(void 0,a)}),n)}},H=q((function(e){localStorage.setItem("REDUX_LOCALSTORAGE",JSON.stringify(e))}),250),X=Object(p.a)({dependencies:M}),_=Object(b.a)({reducer:R,preloadedState:function(e){var n=JSON.parse(localStorage.getItem("REDUX_LOCALSTORAGE")||"{}");return 0===Object.keys(n).length?e:n}({orders:{list:[{id:"id-1",creationDate:1579e9,modificationDate:1579e9,name:"test order 1",price:999,note:"something to note 1"},{id:"id-2",creationDate:1579e9,modificationDate:1579e9,name:"test order 2",price:999,note:"something to note 2"},{id:"id-3",creationDate:1579e9,modificationDate:1579e9,name:"test order 3",price:999,note:"something to note 3"}]}}),middleware:[].concat(Object(s.a)(Object(b.d)()),[X,function(e){var n=e.getState;return function(e){return function(t){var r=e(t),a=n();return H(a),r}}}])});X.run(Y);var K=_,Q=t(26);function W(){var e=Object(r.a)(["\n  padding: 20px;\n\n  border: 10px solid #f7f7f7;\n  border-radius: 5px;\n\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.1), inset 0 0 2px rgba(0, 0, 0, 0.2);\n  background: linear-gradient(to top, #efefef 0%, #ffffff 100%);\n\n  font-size: 2em;\n  text-align: center;\n\n  cursor: pointer;\n  user-select: none;\n\n  :active {\n    background: linear-gradient(to top, #ffffff 0%, #efefef 100%);\n  }\n"]);return W=function(){return e},e}function Z(){var e=Object(r.a)(["\n  position: relative;\n\n  z-index: 1;\n\n  :before {\n    content: '';\n    position: absolute;\n    top: -2px;\n    left: -2px;\n\n    width: calc(100% + 4px);\n    height: calc(100% + 4px);\n\n    background: linear-gradient(\n      45deg,\n      #ff7300,\n      #fffb00,\n      #00ffd5,\n      #ff7300,\n      #fffb00,\n      #00ffd5,\n      #ff7300,\n      #fffb00,\n      #00ffd5,\n      #ff7300,\n      #fffb00,\n      #00ffd5\n    );\n    background-size: 400%;\n    border-radius: 10px;\n\n    z-index: -1;\n    filter: blur(5px);\n\n    opacity: ",";\n    transition: opacity 0.3s ease-in-out;\n    animation: "," 20s linear infinite;\n  }\n"]);return Z=function(){return e},e}function $(){var e=Object(r.a)(["\n  0% {\n    background-position: 0 0;\n  }\n  50% {\n    background-position: 400% 0;\n  }\n  100% {\n    background-position: 0 0;\n  }\n"]);return $=function(){return e},e}var ee=Object(d.keyframes)($()),ne=d.default.div(Z(),(function(e){return e.isVisible?1:0}),ee),te=d.default.div(W()),re=function(e){var n=e.isGlowingVisible,t=e.onClick;return o.a.createElement(ne,{isVisible:n},o.a.createElement(te,{"data-testid":"button",onClick:t},"New Order"))},ae=function(){var e=Object(c.c)((function(e){return e.orders.list})),n=Object(Q.g)();return o.a.createElement(re,{isGlowingVisible:0===e.length,onClick:function(){n.push("/new")}})};function oe(){var e=Object(r.a)(["\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n\n  line-height: 1.5;\n"]);return oe=function(){return e},e}function ie(){var e=Object(r.a)(["\n  min-width: 0;\n\n  flex: 1 1 ",";\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  :not(:first-child) {\n    margin-left: 20px;\n  }\n"]);return ie=function(){return e},e}function ce(){var e=Object(r.a)(["\n  height: 30px;\n  display: flex;\n\n  cursor: pointer;\n"]);return ce=function(){return e},e}function ue(){var e=Object(r.a)(["\n  font-size: 2em;\n\n  padding: 10px;\n  border-bottom: 1px solid #d8d8d8;\n\n  background: linear-gradient(to top, #ffffff 0%, #efefef 100%);\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.14);\n"]);return ue=function(){return e},e}var de=d.default.div(ue()),le=d.default.div(ce()),fe=d.default.div(ie(),(function(e){return e.percent})),se=d.default.span(oe()),be=function(e){var n=e.index,t=e.id,r=e.name,a=e.price,i=e.note,c=e.onClick;return o.a.createElement(o.a.Fragment,null,o.a.createElement(de,null,o.a.createElement(le,{"data-testid":"row",onClick:function(){return c(t)}},o.a.createElement(fe,{percent:"10%"},o.a.createElement(se,{"data-testid":"no"},n+1)),o.a.createElement(fe,{percent:"30%"},o.a.createElement(se,{"data-testid":"name"},r)),o.a.createElement(fe,{percent:"15%"},o.a.createElement(se,{"data-testid":"price"},a.toLocaleString())),o.a.createElement(fe,{percent:"45%"},o.a.createElement(se,{"data-testid":"note"},i)))))},pe=function(e){var n=Object(Q.g)();return o.a.createElement(be,Object.assign({},e,{onClick:function(e){n.push("/orders/".concat(e))}}))};function me(){var e=Object(r.a)(["\n  margin: 0 auto;\n  width: 99%;\n"]);return me=function(){return e},e}var ve=d.default.div(me()),Oe=function(e){var n=e.ordersList;return o.a.createElement(ve,{"data-testid":"container"},n.map((function(e,n){var t=e.id,r=e.name,a=e.price,i=e.note;return o.a.createElement(pe,{key:t,index:n,id:t,name:r,price:a,note:i})})))},ge=function(){var e=Object(c.c)((function(e){return e.orders.list}));return o.a.createElement(Oe,{ordersList:e})},xe=t(21);function je(){var e=Object(r.a)(["\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  background-color: rgba(0, 0, 0, 0.5);\n\n  z-index: 999;\n"]);return je=function(){return e},e}var he=d.default.div(je());function Ee(){var e=Object(r.a)(["\n  padding: 0 15px 20px;\n\n  max-width: 640px;\n  width: 80%;\n  max-height: 400px;\n\n  background-color: #fff;\n  border-radius: 4px;\n\n  ","\n"]);return Ee=function(){return e},e}function ye(){var e=Object(r.a)(["\n  animation: "," 0.82s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;\n  transform: translate3d(0, 0, 0);\n  backface-visibility: hidden;\n  perspective: 1000px;\n"]);return ye=function(){return e},e}function ke(){var e=Object(r.a)(["\n  10%, 90% {\n    transform: translate3d(-1px, 0, 0);\n  }\n  20%, 80% {\n    transform: translate3d(2px, 0, 0);\n  }\n  30%, 50%, 70% {\n    transform: translate3d(-4px, 0, 0);\n  }\n  40%, 60% {\n    transform: translate3d(4px, 0, 0);\n  }\n"]);return ke=function(){return e},e}var we=Object(d.keyframes)(ke()),Ce=Object(d.css)(ye(),we),Se=d.default.div(Ee(),(function(e){return e.isShakeModal?Ce:""}));function De(){var e=Object(r.a)(["\n  color: #eb1e32;\n\n  margin: 3px 0;\n"]);return De=function(){return e},e}var Ie=d.default.p(De()),ze=t(70),Ae=t(71);function Ue(){var e=Object(r.a)(["\n  ","\n\n  width: 100%;\n  padding: 6px 12px;\n  background-color: #fff;\n\n  resize: none;\n"]);return Ue=function(){return e},e}function Re(){var e=Object(r.a)(["\n  ","\n\n  display: block;\n\n  width: 100%;\n  height: 40px;\n  padding: 6px 12px;\n  background-color: #fff;\n\n  ","\n"]);return Re=function(){return e},e}function Fe(){var e=Object(r.a)(["\n  appearance: none;\n\n  border: 1px solid #d9dadc;\n  border-radius: 0;\n\n  font-size: 1.6em;\n  line-height: 1.5;\n  color: #222326;\n\n  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n  transition-duration: 0.15s, 0.15s;\n  transition-timing-function: ease-in-out, ease-in-out;\n  transition-delay: 0s, 0s;\n\n  :focus {\n    border-color: #919496;\n    outline: 0;\n  }\n"]);return Fe=function(){return e},e}var Le=Object(d.css)(Fe()),Pe=d.default.input(Re(),Le,(function(e){return e.isError?"border-color: #eb1e32;":""})),Te=Object(a.forwardRef)((function(e,n){var t=e.onChange,r=Object(Ae.a)(e,["onChange"]),i=Object(a.useRef)(!1);return o.a.createElement(Pe,Object.assign({},r,{ref:n,onCompositionStart:function(){return i.current=!0},onCompositionEnd:function(){return i.current=!1},onChange:function(e){return!i.current&&t&&t(e)}}))})),Ve=d.default.textarea(Ue(),Le);function Ge(){var e=Object(r.a)(["\n  ","\n\n  text-shadow: 0px 1px 0px #528009;\n\n  border: 1px solid #74b807;\n  box-shadow: inset 0px 1px 0px 0px #a4e271;\n\n  background: linear-gradient(to bottom, #89c403 5%, #77a809 100%);\n  background-color: #89c403;\n\n  :hover {\n    background: linear-gradient(to bottom, #77a809 5%, #89c403 100%);\n    background-color: #77a809;\n  }\n"]);return Ge=function(){return e},e}function Ne(){var e=Object(r.a)(["\n  ","\n\n  text-shadow: 0px 1px 0px #810e05;\n\n  border: 1px solid #d02718;\n  box-shadow: inset 0px 1px 0px 0px #f5978e;\n\n  background: linear-gradient(to bottom, #f24537 5%, #c62d1f 100%);\n  background-color: #f24537;\n\n  :hover {\n    background: linear-gradient(to bottom, #c62d1f 5%, #f24537 100%);\n    background-color: #c62d1f;\n  }\n"]);return Ne=function(){return e},e}function Be(){var e=Object(r.a)(["\n  ","\n\n  text-shadow: 0px 1px 0px #1570cd;\n\n  border: 1px solid #337fed;\n  box-shadow: inset 0px 1px 0px 0px #97c4fe;\n\n  background: linear-gradient(to bottom, #3d94f6 5%, #1e62d0 100%);\n  background-color: #3d94f6;\n\n  :hover {\n    background: linear-gradient(to bottom, #1e62d0 5%, #3d94f6 100%);\n    background-color: #1e62d0;\n  }\n"]);return Be=function(){return e},e}function Je(){var e=Object(r.a)(["\n  display: inline-block;\n  width: 32%;\n  padding: 6px 0;\n\n  border-radius: 6px;\n\n  color: #ffffff;\n  font-size: 1.5em;\n  text-decoration: none;\n\n  cursor: pointer;\n\n  display: flex;\n  justify-content: center;\n\n  :focus {\n    outline: 0;\n  }\n"]);return Je=function(){return e},e}var Me=Object(d.css)(Je()),Ye=d.default.input.attrs({type:"button"})(Be(),Me),qe=d.default.input.attrs({type:"button"})(Ne(),Me),He=d.default.input.attrs({type:"submit"})(Ge(),Me);function Xe(){var e=Object(r.a)(["\n  margin-top: 20px;\n\n  display: flex;\n  justify-content: space-between;\n"]);return Xe=function(){return e},e}function _e(){var e=Object(r.a)(["\n  min-height: 57px;\n\n  margin-bottom: 2px;\n"]);return _e=function(){return e},e}var Ke=Object(O.a)([function(e){return e.orders.list},function(e,n){return n}],(function(e,n){return e.find((function(e){return e.id===n}))})),Qe=d.default.div(_e()),We=d.default.div(Xe()),Ze=function(e){var n=e.name,t=e.price,r=e.note,i=e.isDeletable,c=e.onCancel,u=e.onDelete,d=e.onSubmit,l=e.onUserInteractedChange,f=Object(ze.a)({mode:"onBlur"}),s=f.handleSubmit,b=f.register,p=f.errors,m=f.formState.dirty;Object(a.useEffect)((function(){l(m)}),[l,m]);var v=s(d);return o.a.createElement("form",{onSubmit:v},o.a.createElement(Qe,null,o.a.createElement(Te,{"data-testid":"name",name:"name",placeholder:"\u8a02\u55ae\u540d\u7a31",autoComplete:"off",defaultValue:n,onChange:function(e){var n=e.target;return n.value=n.value.trimStart()},onBlur:function(e){var n=e.target;return n.value=n.value.trim()},ref:b({required:"\u8acb\u8f38\u5165\u8a02\u55ae\u540d\u7a31"}),isError:!!p.name}),p.name&&o.a.createElement(Ie,null,p.name.message)),o.a.createElement(Qe,null,o.a.createElement(Te,{"data-testid":"price",name:"price",placeholder:"\u8a02\u55ae\u91d1\u984d",type:"number",defaultValue:t||void 0,ref:b({required:"\u8acb\u8f38\u5165\u8a02\u55ae\u91d1\u984d",min:{value:1,message:"\u8acb\u8f38\u5165\u5927\u65bc 1 \u7684\u6578\u5b57"},max:{value:999999999,message:"\u8acb\u8f38\u5165\u5c0f\u65bc 999,999,999 \u7684\u6578\u5b57"}}),isError:!!p.price}),p.price&&o.a.createElement(Ie,null,p.price.message)),o.a.createElement(Qe,null,o.a.createElement(Ve,{"data-testid":"note",name:"note",placeholder:"\u5099\u8a3b",rows:3,defaultValue:r,onChange:function(e){var n=e.target;return n.value=n.value.trimStart()},onBlur:function(e){var n=e.target;return n.value=n.value.trim()},ref:b})),o.a.createElement(We,null,o.a.createElement(Ye,{"data-testid":"cancel",value:"\u53d6\u6d88",onClick:c}),i&&o.a.createElement(qe,{"data-testid":"delete",value:"\u522a\u9664",onClick:u}),o.a.createElement(He,{"data-testid":"submit",value:"\u9001\u51fa"})))},$e=function(e){var n=e.onUserInteractedChange,t=Object(Q.h)().orderID,r=Object(Q.i)({path:"/new"}),a=Object(c.c)((function(e){return Ke(e,t||"")})),i=Object(Q.g)(),u=function(){i.push("/")},d=Object(c.b)(),l=a||{name:"",price:0,note:""},f=l.name,s=l.price,b=l.note;return r||a?o.a.createElement(Ze,{name:f,price:s,note:b,isDeletable:!!t,onDelete:function(){t&&d(k(t)),u()},onCancel:u,onSubmit:function(e){var n=e.name,r=e.price,a=e.note,o=void 0===a?"":a;d(t?w({id:t,name:n,price:Number(r),note:o}):y({name:n,price:Number(r),note:o})),u()},onUserInteractedChange:n}):o.a.createElement(Q.a,{to:"/"})};function en(){var e=Object(r.a)(["\n  height: 20px;\n  margin: 2px 0;\n\n  display: flex;\n  align-items: center;\n"]);return en=function(){return e},e}var nn=d.default.div(en()),tn=function(e){var n=e.isUnSafeExit,t=e.onOverlayClick,r=e.onUserInteractedChange;return o.a.createElement(he,{"data-testid":"overlay",onClick:t},o.a.createElement(Se,{onClick:function(e){return e.stopPropagation()},isShakeModal:n},o.a.createElement(nn,null,n&&o.a.createElement(Ie,null,"\u5c1a\u672a\u9001\u51fa\u7de8\u8f2f\uff0c\u653e\u68c4\u8acb\u6309\u300c\u53d6\u6d88\u300d")),o.a.createElement($e,{onUserInteractedChange:r})))},rn=function(){var e=Object(a.useState)(!1),n=Object(xe.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)(!1),u=Object(xe.a)(c,2),d=u[0],l=u[1],f=Object(a.useRef)(!1),s=Object(a.useRef)(document.createElement("div"));Object(a.useEffect)((function(){var e=s.current,n=document.body.style,t=n.overflowY,r=n.position;return f.current=!0,document.body.appendChild(e),document.body.style.overflowY="hidden",document.body.style.position="fixed",function(){f.current=!1,document.body.removeChild(e),document.body.style.overflowY=t,document.body.style.position=r}}),[]);var b=Object(Q.g)(),p=Object(a.useCallback)(q((function(){f.current&&l(!1)}),3e3),[]);return Object(i.createPortal)(o.a.createElement(tn,{isUnSafeExit:d,onOverlayClick:function(){t?(l(!0),p()):b.push("/")},onUserInteractedChange:r}),s.current)};function an(){var e=Object(r.a)(["\n  max-width: 800px;\n  width: 90%;\n  margin: 15% auto 0;\n"]);return an=function(){return e},e}var on=d.default.div(an()),cn=function(){return o.a.createElement(on,null,o.a.createElement(ae,null),o.a.createElement(ge,null),o.a.createElement(Q.d,null,o.a.createElement(Q.b,{path:["/new","/orders/:orderID"]},o.a.createElement(rn,null)),o.a.createElement(Q.a,{to:"/"})))};function un(){var e=Object(r.a)(["\n  ","\n\n  html {\n    box-sizing: border-box;\n    font-size: 62.5%;\n    font-family: 'HelveticaNeue', Helvetica, Arial, 'Lucida Grande', sans-serif;\n\n    background: #fbc856;\n  }\n\n  body {\n    width: 100vw;\n  }\n\n  *, *:before, *:after {\n    box-sizing: inherit;\n  }\n"]);return un=function(){return e},e}var dn=Object(d.createGlobalStyle)(un(),f.a);Object(i.render)(o.a.createElement(o.a.Fragment,null,o.a.createElement(dn,null),o.a.createElement(c.a,{store:K},o.a.createElement(u.a,{basename:"/react-order-board"},o.a.createElement(cn,null)))),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.8f7ade77.chunk.js.map